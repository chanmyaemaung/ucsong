<div class="songs-container">
  <div class="controls">
    <mat-form-field class="search-field" appearance="outline">
      <mat-label>Search songs</mat-label>
      <input
        type="text"
        matInput
        [formControl]="searchControl"
        [matAutocomplete]="auto"
        placeholder="Search by number or title..."
      />
      <mat-icon matSuffix>search</mat-icon>
      <mat-autocomplete
        #auto="matAutocomplete"
        [displayWith]="displayFn.bind(this)"
        (optionSelected)="onOptionSelected($event.option.value)"
      >
        @for (song of filteredSongs | async; track song.id) {
        <mat-option [value]="song">
          <span
            [innerHTML]="
              highlightMatch(
                song.number + ' - ' + song.translations[currentLang()].title
              )
            "
          ></span>
        </mat-option>
        }
      </mat-autocomplete>
    </mat-form-field>

    <button mat-button (click)="toggleView()">
      <mat-icon>{{ isGridView() ? "view_list" : "grid_view" }}</mat-icon>
      {{ isGridView() ? "List View" : "Grid View" }}
    </button>
  </div>

  <!-- Grid View (Calculator Style) -->
  @if (isGridView()) {
  <div class="grid-view">
    @for (song of songsService.songs(); track song.id) {
    <button
      mat-raised-button
      class="song-number-btn"
      [routerLink]="['/songs', song.id]"
    >
      {{ song.number }}
    </button>
    }
  </div>
  } @else {
  <!-- List View -->
  <div class="list-view">
    @for (song of songsService.songs(); track song.id) {
    <mat-card class="song-card" [routerLink]="['/songs', song.id]">
      <mat-card-header>
        <div mat-card-avatar class="song-number">{{ song.number }}</div>
        <mat-card-title>
          {{ song.translations[currentLang()].title }}
        </mat-card-title>
        <mat-card-subtitle>{{ song.category }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-actions>
        <button mat-button color="primary">
          <mat-icon>play_arrow</mat-icon>
          PLAY
        </button>
        <button mat-button color="accent">
          <mat-icon>favorite_border</mat-icon>
          LIKE
        </button>
      </mat-card-actions>
    </mat-card>
    }
  </div>
  }
</div>
